{
  "config_schema_json": {
    "$schema": "http://json-schema.org/draft/2020-12/schema",
    "$id": "https://github.com/estuary/connectors/materialize-elasticsearch/config",
    "properties": {
      "endpoint": {
        "type": "string",
        "title": "Endpoint",
        "description": "Endpoint host or URL. If using Elastic Cloud this follows the format https://CLUSTER_ID.REGION.CLOUD_PLATFORM.DOMAIN:PORT",
        "order": 0
      },
      "username": {
        "type": "string",
        "title": "Username",
        "description": "User to connect to the endpoint.",
        "order": 1
      },
      "password": {
        "type": "string",
        "title": "Password",
        "description": "Password to connect to the endpoint.",
        "order": 2,
        "secret": true
      }
    },
    "type": "object",
    "required": [
      "endpoint"
    ],
    "title": "Elasticsearch Connection"
  },
  "resource_config_schema_json": {
    "$schema": "http://json-schema.org/draft/2020-12/schema",
    "$id": "https://github.com/estuary/connectors/materialize-elasticsearch/resource",
    "properties": {
      "index": {
        "type": "string",
        "description": "Name of the ElasticSearch index to store the materialization results.",
        "x-collection-name": true
      },
      "delta_updates": {
        "type": "boolean",
        "description": "Should updates to this table be done via delta updates. Default is false.",
        "default": false
      },
      "field_overrides": {
        "items": {
          "properties": {
            "pointer": {
              "type": "string",
              "description": "A '/'-delimitated json pointer to the location of the overridden field."
            },
            "es_type": {
              "properties": {
                "field_type": {
                  "type": "string",
                  "description": "The elastic search field data types. Supported types include: boolean, date, double, geo_point, geo_shape, keyword, long, null, text."
                },
                "date_spec": {
                  "properties": {
                    "format": {
                      "type": "string",
                      "description": "Format of the date. See https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-date-format.html."
                    }
                  },
                  "additionalProperties": false,
                  "type": "object",
                  "required": [
                    "format"
                  ],
                  "description": "Spec of the date field, effective if field_type is 'date'. See https://www.elastic.co/guide/en/elasticsearch/reference/current/date.html"
                },
                "keyword_spec": {
                  "properties": {
                    "ignore_above": {
                      "type": "integer",
                      "description": "Strings longer than the ignore_above setting will not be indexed or stored. See https://www.elastic.co/guide/en/elasticsearch/reference/current/ignore-above.html"
                    }
                  },
                  "additionalProperties": false,
                  "type": "object",
                  "required": [
                    "ignore_above"
                  ],
                  "description": "Spec of the keyword field, effective if field_type is 'keyword'. See https://www.elastic.co/guide/en/elasticsearch/reference/current/keyword.html"
                },
                "text_spec": {
                  "properties": {
                    "dual_keyword": {
                      "type": "boolean",
                      "description": "Whether or not to specify the field as text/keyword dual field."
                    },
                    "keyword_ignore_above": {
                      "type": "integer",
                      "description": "Effective only if DualKeyword is enabled. Strings longer than the ignore_above setting will not be indexed or stored. See https://www.elastic.co/guide/en/elasticsearch/reference/current/ignore-above.html"
                    }
                  },
                  "additionalProperties": false,
                  "type": "object",
                  "required": [
                    "dual_keyword",
                    "keyword_ignore_above"
                  ],
                  "description": "Spec of the text field, effective if field_type is 'text'."
                }
              },
              "additionalProperties": false,
              "type": "object",
              "required": [
                "field_type"
              ],
              "description": "The overriding elastic search data type of the field."
            }
          },
          "additionalProperties": false,
          "type": "object",
          "required": [
            "pointer",
            "es_type"
          ]
        },
        "type": "array"
      },
      "number_of_shards": {
        "type": "integer",
        "description": "The number of shards in ElasticSearch index. Must set to be greater than 0.",
        "default": 1
      },
      "number_of_replicas": {
        "type": "integer",
        "description": "The number of replicas in ElasticSearch index. If not set, default to be 0. For single-node clusters, make sure this field is 0, because the Elastic search needs to allocate replicas on different nodes."
      }
    },
    "type": "object",
    "required": [
      "index",
      "delta_updates"
    ],
    "title": "Elasticsearch Index"
  },
  "documentation_url": "https://go.estuary.dev/materialize-elasticsearch"
}
