{
  "collections": {
    "tests/simple": {
       "schema": {
          "properties": {
           "id": { "type": "integer" },
           "canary": { "type": "string" }
          },
          "required": ["id", "canary"],
          "type": "object"
       },
       "key": ["/id"]
    },
    "tests/duplicated-keys": {
       "schema": {
          "properties": {
           "id": { "type": "integer" },
           "int": { "type": "integer", "reduce": {"strategy": "sum"} },
           "str": { "type": "string" }
          },
          "required": ["id", "str"],
          "type": "object",
          "reduce": { "strategy": "merge" }
       },
       "key": ["/id"]
    },
    "tests/timezone-datetimes": {
       "schema": {
          "properties": {
           "id": { "type": "integer" },
           "utc_datetime": { "type": "string", "format": "date-time" },
           "offset_datetime": { "type": "string", "format": "date-time" }
          },
          "required": ["id", "utc_datetime", "offset_datetime"],
          "type": "object"
       },
       "key": ["/id"]
    },
    "tests/multiple-data-types": {
       "schema": {
       "properties": {
           "id": { "type": "integer" },
           "str_field": { "type": "string" },
           "float_field": { "type": "number" },
           "bool_field": {"type": "boolean"},
           "nullable_int": {"type": ["null", "integer"]},
           "array_int": {"type": "array", "items": {"type": "integer"}},
           "nested": {"type": "object", "required": ["id"], "properties": {"id": {"type": "string"}}},
           "multiple": {"type": ["array", "object", "string", "integer", "number", "boolean", "null"]},
           "binary_field": {"type": "string", "contentEncoding": "base64"}
          },
          "required": ["id", "str_field"],
          "type": "object"
       },
       "key": ["/id"]
    },
    "tests/formatted-strings": {
       "schema": {
       "properties": {
           "id": { "type": "integer" },
           "int_and_str": {"type": ["integer", "string"], "format": "integer"},
           "num_and_str": {"type": ["number", "string"], "format": "number"},
           "int_str": {"type": "string", "format": "integer"},
           "num_str": {"type": "string", "format": "number"},
           "datetime": {"type": "string", "format": "date-time"},
           "date": {"type": "string", "format": "date"},
           "time": {"type": "string", "format": "time"}
          },
          "required": ["id"],
          "type": "object"
       },
       "key": ["/id"]
    },
    "tests/long-string": {
       "schema": {
       "properties": {
           "id": { "type": "string" },
           "str_field": { "type": "string" }
          },
          "required": ["id", "str_field"],
          "type": "object"
       },
       "key": ["/id"]
    },
    "tests/compound-key": {
      "schema": {
        "properties": {
          "yin": { "type": "string" },
          "yan": { "type": "string" },
          "num": { "type": "integer" }
        },
        "required": ["yin", "yan", "num"],
        "type": "object"
      },
      "key": ["/yin", "/yan"]
    },
    "tests/symbols": {
      "schema": {
        "properties": {
           "id": { "type": "string" },
          "testing (%s)": { "type": "string" }
        },
        "required": ["testing (%s)"],
        "type": "object"
      },
      "key": ["/testing (%s)"]
    },
    "tests/unsigned-bigint": {
       "schema": {
       "properties": {
           "id": { "type": "integer" },
           "unsigned_bigint": { "type": "integer", "maximum": 18446744073709551615 }
          },
          "required": ["id"],
          "type": "object"
       },
       "key": ["/id"]
    },
    "tests/deletions": {
      "schema": {
        "properties": {
           "id": { "type": "integer" },
           "_meta": {
             "type": "object",
             "properties": {
                "op": {
                  "type": "string"
                }
             }
           }
        },
        "required": ["id"],
        "type": "object",

        "if": {
          "properties": {
            "_meta": {
              "properties": {
                "op": {
                  "const": "d"
                }
              }
            }
          }
        },
        "then": {
          "reduce": {
            "delete": true,
            "strategy": "lastWriteWins"
          }
        }
      },
      "key": ["/id"]
    },
    "tests/binary-key": {
       "schema": {
       "properties": {
           "id": {"type": "string", "contentEncoding": "base64"},
           "counter": { "type": "integer" }
          },
          "required": ["id"],
          "type": "object"
       },
       "key": ["/id"]
    },
    "tests/string-escaped-key": {
       "schema": {
       "properties": {
           "id": {"type": "string"},
           "counter": { "type": "integer", "reduce": { "strategy": "sum" } }
          },
          "required": ["id"],
          "type": "object",
          "reduce": { "strategy": "merge" }
       },
       "key": ["/id"]
    },
    "tests/underscore-column": {
       "schema": {
          "properties": {
            "_id": {"type": "integer"},
            "__some_field": { "type": "string" }
          },
          "required": ["_id", "__some_field"],
          "type": "object"
       },
       "key": ["/_id"]
    },
    "tests/all-key-types-part-one": {
      "schema": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "strintkey": {"type": "string", "format": "integer"},
          "strnumkey": {"type": "string", "format": "number"},
          "strint": {"type": "string", "format": "integer"},
          "strnum": {"type": "string", "format": "number"},
          "counter": {"type": "integer"}
        },
        "required": ["id", "strintkey", "strnumkey"]
      },
      "key": ["/id", "/strintkey", "/strnumkey"]
    },
    "tests/all-key-types-part-two": {
      "schema": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "timekey": {"type": "string", "format": "time"},
          "datekey": {"type": "string", "format": "date"},
          "date": {"type": "string", "format": "date"},
          "time": {"type": "string", "format": "time"},
          "counter": {"type": "integer"}
        },
        "required": ["id", "datekey", "timekey"]
      },
      "key": ["/id", "/datekey", "/timekey"]
    },
    "tests/all-key-types-part-three": {
      "schema": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "datetimekey": {"type": "string", "format": "date-time"},
          "uuidkey": {"type": "string", "format": "uuid"},
          "datetime": {"type": "string", "format": "date-time"},
          "uuid": {"type": "string", "format": "uuid"},
          "counter": {"type": "integer"}
        },
        "required": ["id", "datetimekey", "uuidkey"]
      },
      "key": ["/id", "/datetimekey", "/uuidkey"]
    },
    "tests/fields-with-projections": {
      "schema": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "original_field": {"type": "string"},
          "another_field": {"type": "string"}
        },
        "required": ["id"]
      },
      "key": ["/id"],
      "projections": {
        "projected_field": "/original_field",
        "projected_another": "/another_field"
      }
    },
    "tests/many-columns": {
      "schema": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "a0": {"type": "integer"},
          "a1": {"type": "integer"},
          "a2": {"type": "integer"},
          "a3": {"type": "integer"},
          "a4": {"type": "integer"},
          "a5": {"type": "integer"},
          "a6": {"type": "integer"},
          "a7": {"type": "integer"},
          "a8": {"type": "integer"},
          "a9": {"type": "integer"},
          "a10": {"type": "integer"},
          "a11": {"type": "integer"},
          "a12": {"type": "integer"},
          "a13": {"type": "integer"},
          "a14": {"type": "integer"},
          "a15": {"type": "integer"},
          "a16": {"type": "integer"},
          "a17": {"type": "integer"},
          "a18": {"type": "integer"},
          "a19": {"type": "integer"},
          "a20": {"type": "integer"},
          "a21": {"type": "integer"},
          "a22": {"type": "integer"},
          "a23": {"type": "integer"},
          "a24": {"type": "integer"},
          "a25": {"type": "integer"},
          "a26": {"type": "integer"},
          "a27": {"type": "integer"},
          "a28": {"type": "integer"},
          "a29": {"type": "integer"},
          "a30": {"type": "integer"},
          "a31": {"type": "integer"},
          "a32": {"type": "integer"},
          "a33": {"type": "integer"},
          "a34": {"type": "integer"},
          "a35": {"type": "integer"},
          "a36": {"type": "integer"},
          "a37": {"type": "integer"},
          "a38": {"type": "integer"},
          "a39": {"type": "integer"},
          "a40": {"type": "integer"},
          "a41": {"type": "integer"},
          "a42": {"type": "integer"},
          "a43": {"type": "integer"},
          "a44": {"type": "integer"},
          "a45": {"type": "integer"},
          "a46": {"type": "integer"},
          "a47": {"type": "integer"},
          "a48": {"type": "integer"},
          "a49": {"type": "integer"},
          "a50": {"type": "integer"},
          "a51": {"type": "integer"},
          "a52": {"type": "integer"},
          "a53": {"type": "integer"},
          "a54": {"type": "integer"},
          "a55": {"type": "integer"},
          "a56": {"type": "integer"},
          "a57": {"type": "integer"},
          "a58": {"type": "integer"},
          "a59": {"type": "integer"},
          "a60": {"type": "integer"},
          "a61": {"type": "integer"},
          "a62": {"type": "integer"},
          "a63": {"type": "integer"},
          "a64": {"type": "integer"},
          "a65": {"type": "integer"},
          "a66": {"type": "integer"},
          "a67": {"type": "integer"},
          "a68": {"type": "integer"},
          "a69": {"type": "integer"},
          "a70": {"type": "integer"},
          "a71": {"type": "integer"},
          "a72": {"type": "integer"},
          "a73": {"type": "integer"},
          "a74": {"type": "integer"},
          "a75": {"type": "integer"},
          "a76": {"type": "integer"},
          "a77": {"type": "integer"},
          "a78": {"type": "integer"},
          "a79": {"type": "integer"},
          "a80": {"type": "integer"},
          "a81": {"type": "integer"},
          "a82": {"type": "integer"},
          "a83": {"type": "integer"},
          "a84": {"type": "integer"},
          "a85": {"type": "integer"},
          "a86": {"type": "integer"},
          "a87": {"type": "integer"},
          "a88": {"type": "integer"},
          "a89": {"type": "integer"},
          "a90": {"type": "integer"},
          "a91": {"type": "integer"},
          "a92": {"type": "integer"},
          "a93": {"type": "integer"},
          "a94": {"type": "integer"},
          "a95": {"type": "integer"},
          "a96": {"type": "integer"},
          "a97": {"type": "integer"},
          "a98": {"type": "integer"},
          "a99": {"type": "integer"}
        },
        "required": ["id"]
      },
      "key": ["/id"]
    },
    "tests/perf-simple": {
      "schema": {
        "properties": {
          "id": { "type": "integer" },
          "uuid": { "type": "string" },
          "name": { "type": "string" },
          "email": { "type": "string" },
          "value": { "type": "integer" }
        },
        "required": ["id"],
        "type": "object"
      },
      "key": ["/id"]
    },
    "tests/perf-uuid-key": {
      "schema": {
        "properties": {
          "id": { "type": "string" },
          "timestamp": { "type": "string" },
          "name": { "type": "string" },
          "value": { "type": "integer" }
        },
        "required": ["id"],
        "type": "object"
      },
      "key": ["/id"]
    }
  },

  "materializations": {
    "tests/${CONNECTOR}/materialize": {
      "endpoint": {
        "connector": {
          "image": "${CONNECTOR_IMAGE}",
          "config": ${CONNECTOR_CONFIG}
        }
      },
      "bindings": ${RESOURCES_CONFIG}
    }
  }
}
